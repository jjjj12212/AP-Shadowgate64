#include "dialog.h"

char translation[] = {
        0x00, 0x00, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x01, 0x0B, 0x0B, 0x01, 0x0B, 0x0B, 0x0B, //16
        0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, //32
        0x14, '\\', 0x0B, 0x0B, 0x0B, 0x0B, '[', 0x0B, 0x0B, 0x0B, 0x0B, 0x0E, 0x0B, 0x0F, 0x0B, 0x1D, //48
        0x1E, 0x1F, ' ', '!', '"', '#', '$', '%', '&',  0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, //64
        '\'', '(', ')', '*', '+', ',', '-', '.', '/', '0', '1', '2', '3', '4', '5', '6', //80
        '7', '8', '9', ':', ';', '<', '=', '>', '?', '@', 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, //96
        'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', //112
        'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, //128
        0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, //144
        0x00, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, //160
        0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, //176
        0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, //192
        0x00, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, //208
        0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, //224
        0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, //240
        0x00, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B, 0x0B //256
    };

void character_translate(char* string)
{
  while(true)
  {
    if(*string == 0) 
        break;
    *string = translation[*string];
    string++;
  }
}

bool DIALOG_SET = false;
void show_dialog(u8 item)
{
    sg_game_state = GS_DIALOG;
    DIALOG_SET = true;
    sg_dialog_question = 0;
    character_translate(ap_memory.pc.message);
    sg_dialog_icon = item;
    sg_dialog_show_icon = true;
    ap_memory_ptrs.text_ready = false;
}

void show_dialog_text(char *text)
{
    sg_game_state = GS_DIALOG;
    DIALOG_SET = true;
    sg_dialog_question = 0;
    strcpy(ap_memory.pc.message, text);
    character_translate(ap_memory.pc.message);
    sg_dialog_show_icon = false;
    ap_memory_ptrs.text_ready = false;
}



